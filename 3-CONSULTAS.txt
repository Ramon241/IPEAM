USE IPEAM;


/*VER NOTAS 2D0 CICLO*/

DELIMITER $$
Create procedure SP_VER_NOTAS_2DO_Ciclo
(IN ID VARCHAR(30))
BEGIN
SELECT DISTINCT AL.Apellido1,AL.Apellido2,AL.Nombre,CU.Curso,AL.Numero,ASI.Asignatura,CAD.N1,CAD.N2,CAD.N3,CAD.N4,
CAD.Promedio,CAD.Asistencia,CAD.CPC,CAD.CPEX,CAD.CEX,ASI1.Asignatura,CAT.VxU1,CAT.RA1,CAT.GCE1,CAT.VxU2,CAT.RA2,
CAT.GCE2,CAT.VxU3,CAT.RA3,CAT.GCE3,CAT.VxU4,CAT.RA4,CAT.GCE4,CAT.VxU5,CAT.RA5,CAT.GCE5,CAT.VxU6,CAT.RA6,
CAT.GCE6,CAT.VxU7,CAT.RA7,CAT.GCE7,CAT.VxU8,CAT.RA8,CAT.GCE8,CAT.GCEG
FROM Calificaciones_2do_Ciclo_Tec AS CAT
JOIN Asignaturas AS ASI ON CAT.IDAsignatura=ASI.IDAsignatura
JOIN Alumnos as AL ON CAT.IDAlumno = AL.IDAlumno
JOIN Calificaciones_2do_Ciclo_Acad AS CAD ON CAT.IDAlumno = CAD.IDAlumno
JOIN Asignaturas AS ASI1 ON CAD.IDAsignatura=ASI1.IDAsignatura
JOIN Cursos AS CU ON CAT.IDCurso = CU.IDCurso
WHERE CAT.IDAlumno = ID
ORDER BY Promedio DESC;
END $$

DELIMITER $
CREATE PROCEDURE SP_SELECCIONAR_ID
(
IN GRAD VARCHAR(3),
IN SECC VARCHAR(60),
IN ASIG VARCHAR(40),
IN MAES VARCHAR(50))
BEGIN
SELECT (SELECT IDGrado FROM Grados WHERE Grado = GRAD ) AS IDGrado, (SELECT IDSeccion FROM Secciones WHERE Seccion = SECC ) AS IDSeccion,
(SELECT IDAsignatura FROM ASIGNATURAS WHERE Asignatura = ASIG ) AS IDAsignatura, (SELECT IDMaestro FROM Maestros WHERE  Nombre = MAES ) AS IDMaestro;
END $
