USE IPEAM;

/*TABLA AESCOLAR*/

DELIMITER $$
CREATE PROCEDURE SP_INSERTAR_AESCOLAR
(IN AES VARCHAR(9))
BEGIN
INSERT INTO Aescolar(Aescolar)
VALUES(AES);
END $$

/*TABLA SECCIONES*/

DELIMITER $$
CREATE PROCEDURE SP_INSERTAR_SECCION
(
IN IDS INT,
IN SEC VARCHAR(60))
BEGIN
INSERT INTO Secciones(IDSeccion,Seccion)
VALUES(IDS,SEC);
END $$

/*TABLA GRADOS*/

DELIMITER $$
CREATE PROCEDURE SP_INSERTAR_GRADO
(
IN IDG INT,
IN GRA VARCHAR(3))
BEGIN
INSERT INTO Grados(IDGrado,Grado)
VALUES(IDG,GRA);
END $$

/*TABLA CURSOS*/

DELIMITER $$
CREATE PROCEDURE SP_INSERTAR_CURSO
(
IN IDC INT,
IN AES VARCHAR(9),
IN GRA VARCHAR(3),
IN SEC VARCHAR(60))
BEGIN
INSERT INTO Cursos(IDCurso,Aescolar,Grado,Seccion)
VALUES(IDC,AES,GRA,SEC);
END $$

/*TABLA INSCRIPCION*/

DELIMITER $$
CREATE PROCEDURE SP_INSERTAR_INSCRIPCION
(
IN IDA VARCHAR(30),
IN AES VARCHAR(9),
IN FEC DATE,
IN NIV VARCHAR(10),
IN IDG INT,
IN IDC INT,
IN AP1 VARCHAR(20),
IN AP2 VARCHAR(20),
IN NOM VARCHAR(40),
IN NND VARCHAR(30),
IN SEX VARCHAR(1),
IN CED VARCHAR(13),
IN ACT VARCHAR(8),
IN FOL VARCHAR(8),
IN LIB VARCHAR(9),
IN AÑO VARCHAR(4),
IN NAC DATE,
IN DIR VARCHAR(200),
IN PRO VARCHAR(50),
IN MUN VARCHAR(50),
IN TRE VARCHAR(12),
IN TEM VARCHAR(12),
IN COR VARCHAR(50),
IN NMA VARCHAR(50),
IN CDM VARCHAR(13),
IN OCM VARCHAR(40),
IN TRM VARCHAR(12),
IN TCM VARCHAR(12),
IN NPA VARCHAR(50),
IN CDP VARCHAR(13),
IN OCP VARCHAR(40),
IN TRP VARCHAR(12),
IN TCP VARCHAR(12),
IN CQV VARCHAR(12),
IN NTU VARCHAR(50),
IN CDT VARCHAR(13),
IN OCT VARCHAR(40),
IN TRT VARCHAR(12),
IN TCT VARCHAR(12),
IN EFM VARCHAR(100),
IN MEU VARCHAR(100),
IN ALE VARCHAR(100),
IN CTA VARCHAR(100),
IN GDA VARCHAR(3),
IN GDR VARCHAR(3),
IN OEO VARCHAR(200),
IN NQI VARCHAR(50),
IN EIP VARCHAR(30)
)
BEGIN
INSERT INTO InsCripcion(IDAlumno,Aescolar,Fechaing,Nivel,IDGrado,IDSeccion,Apellido1,Apellido2,Nombre,Nacionalidad,Sexo,CedulaAlum,Acta,Folio,Libro,Año,FechaNac,Direccion,Provincia,Municipio,TelResidencial,TelEmergencia,Correo,NombreMadre,CedMadre,OcupMadre,TelResMadre,TelCelMadre,NombrePadre,CedPadre,OcupPadre,TelResPadre,TelCelPadre,ConQuienVive,NombreTutor,CedTutor,OcupTutor,TelResTutor,TelCelTutor,Enfermedades,MedUsa,Alergias,CentroAnt,GradoAnt,GradoRep,Observacion,NombrQuienInsc,EncInscrip)
VALUES(IDA,AES,FEC,NIV,IDG,IDC,AP1,AP2,NOM,NND,
SEX,CED,ACT,FOL,LIB,AÑO,NAC,DIR,PRO,MUN,TRE,TEM,
COR,NMA,CDM,OCM,TRM,TCM,NPA,CDP,OCP,TRP,TCP,CQV,
NTU,CDT,OCT,TRT,TCT,EFM,MEU,ALE,CTA,GDA,GDR,OEO,NQI,EIP);
END $$

/*TABLA ASIGNATURAS*/

DELIMITER $$
CREATE PROCEDURE SP_INSERTAR_ASIGNATURAS
(
IN IDA VARCHAR(30),
IN ASI VARCHAR(40),
IN TIP VARCHAR(10),
IN IDG INT,
IN IDS INT
)
BEGIN
INSERT INTO Asignaturas(IDAsignatura,Asignatura,Tipo,IDGrado,IDSeccion)
VALUES(IDA,ASI,TIP,IDG,IDS);
END $$

/*TABLA ALUMNOS*/

DELIMITER $$
CREATE PROCEDURE SP_INSERTAR_ALUMNOS
(
IN IDA VARCHAR(30),
IN AES VARCHAR(9),
IN IDC INT,
IN NUM INT,
IN AP1 VARCHAR(20),
IN AP2 VARCHAR(20),
IN NOM VARCHAR(40)
)
BEGIN
INSERT INTO Alumnos(IDAlumno,Aescolar,IDCurso,Numero,Apellido1,Apellido2,Nombre)
VALUES(IDA,AES,IDC,NUM,AP1,AP2,NOM);
END $$

/*TABLA CALIFICACIONES_1ER_CICLO*/

DELIMITER $$
CREATE PROCEDURE SP_INSERTAR_CALIFICACION_1ER_CICLO
(
IN IDA VARCHAR(30),
IN AES VARCHAR(9),
IN IDC INT,
IN IDAS INT,
IN N1 INT,
IN N2 INT,
IN N3 INT,
IN N4 INT,
IN ASI INT,
IN CPC DECIMAL(3,3),
IN CPEX DECIMAL(3,3))
BEGIN
INSERT INTO Calificaciones_1er_ciclo
(IDAlumno,Aescolar,IDCurso,IDAsignatura,N1,N2,N3,N4,Asistencia,CPC,CPEX)
VALUES
(IDA,AES,IDC,IDAS,N1,N2,N3,N4,ASI,CPC,CPEX);
END $$
DELIMITER ;

/*TABLA CALIFICACIONES_2DO_CICLO_ACAD*/

DELIMITER $$
CREATE PROCEDURE SP_INSERTAR_CALIFICACION_2DO_CICLO_ACAD
(
IN IDA VARCHAR(30),
IN AES VARCHAR(9),
IN IDC INT,
IN IDAS INT,
IN N1 INT,
IN N2 INT,
IN N3 INT,
IN N4 INT,
IN ASI INT,
IN CPC DECIMAL(3,3),
IN CPEX DECIMAL(3,3))
BEGIN
DECLARE QTIPO VARCHAR(10);
SET QTIPO = (SELECT Tipo FROM Asignaturas WHERE IDAsignatura = IDAS);
IF (QTIPO = 'ACADEMICA') 
THEN
INSERT INTO calificaciones_2do_ciclo_acad
(IDAlumno,Aescolar,IDCurso,IDAsignatura,N1,N2,N3,N4,Asistencia,CPC,CPEX)
VALUES
(IDA,AES,IDC,IDAS,N1,N2,N3,N4,ASI,CPC,CPEX);
END IF;
IF (QTIPO <> 'ACADEMICA') THEN SELECT ("Debe insertar una asignatura academica") AS '¡Error!';
END IF;
END $$
DELIMITER ;

/*TABLA CALIFICACIONES_2DO_CICLO_TEC*/

DELIMITER $$
CREATE PROCEDURE SP_INSERTAR_CALIFICACION_2DO_CICLO_TEC
(
IN IDA VARCHAR(30),IN AES VARCHAR(9),IN IDC INT,
IN IDAS INT,IN Vx1 INT,IN RA1 INT,IN GCE1 VARCHAR(1),
IN Vx2 INT,IN RA2 INT,IN GCE2 VARCHAR(1),IN Vx3 INT,
IN RA3 INT,IN GCE3 VARCHAR(1),IN Vx4 INT,IN RA4 INT,
IN GCE4 VARCHAR(1),IN Vx5 INT,IN RA5 INT,IN GCE5 VARCHAR(1),
IN Vx6 INT,IN RA6 INT,IN GCE6 VARCHAR(1),IN Vx7 INT,
IN RA7 INT,IN GCE7 VARCHAR(1),IN Vx8 INT,IN RA8 INT,
IN GCE8 VARCHAR(1),IN GCEG VARCHAR(1)
)
BEGIN
DECLARE QTIPO VARCHAR(10);
SET QTIPO = (SELECT Tipo FROM Asignaturas WHERE IDAsignatura = IDAS);
IF (QTIPO = 'TECNICA') 
THEN
INSERT INTO calificaciones_2do_ciclo_tec
(IDAlumno,Aescolar,IDCurso,IDAsignatura,VxU1,
RA1,GCE1,VxU2,RA2,GCE2,VxU3,RA3,GCE3,VxU4,
RA4,GCE4,VxU5,RA5,GCE5,VxU6,RA6,GCE6,VxU7,
RA7,GCE7,VxU8,RA8,GCE8,GCEG)
VALUES
(IDA,AES,IDC,IDAS,
VxU1,RA1,GCE1,
VxU2,RA2,GCE2,
VxU3,RA3,GCE3,
VxU4,RA4,GCE4,
VxU5,RA5,GCE5,
VxU6,RA6,GCE6,
VxU7,RA7,GCE7,
VxU8,RA8,GCE8,
GCEG);
END IF;
IF (QTIPO <> 'TECNICA') THEN SELECT ("Debe insertar una asignatura tecnica") AS '¡Error!';
END IF;
END $$
DELIMITER ;

/*TABLA MAESTROS*/

DELIMITER $$
CREATE PROCEDURE SP_INSERTAR_MAESTROS
(
IN AP1 VARCHAR(50),
IN AP2 VARCHAR(50),
IN NOM VARCHAR(50),
IN IDA INT,
IN IDC INT
)
BEGIN
INSERT INTO Maestros(Apellido1,Apellido2,Nombre,IDAsignatura,IDCurso)
VALUES(AP1,AP2,NOM,IDA,IDC);
END $$

CALL SP_INSERTAR_AESCOLAR ('2022-2023');
CALL SP_INSERTAR_SECCION (1,'INFORMATICA');
CALL SP_INSERTAR_GRADO (1,'6TO');
CALL SP_INSERTAR_CURSO (1,'2022-2023','6TO','INFORMATICA');
CALL SP_INSERTAR_INSCRIPCION ('D2I8A20N','2022-2023','2022-10-25','SECUNDARIA',1,1,'Lebron','Cespedes','Ramon','SAMOANO','M','KLKKLKKLK','SDSEE','DFGB','SGSG','2006','2006-01-24','PIANTINI','DISTRITO NACIONAL','EL NACO','840764','765TYH','YJHTBG','YNHBTGVRFC','UHGTRGF','NTHBGRVFE','YNHRBTGV','GSGD','EHSFGH','DGSSDG','SBGFBSD','SBFDGDB','DFNTER','DFNRBN','BFSBS','GRERG','WGHRE','WRBBE','EBE','GERGER','GRERGT','GERRV','VEWFE','SGR','VSJ','DTHDHDH','DHDHDH','DHTEHHR');
CALL SP_INSERTAR_ASIGNATURAS ('1','MANTENIMIENTO','TECNICA',1,1);
CALL SP_INSERTAR_ASIGNATURAS ('2','SOPORTE','ACADEMICA',1,1);
CALL SP_INSERTAR_ALUMNOS ('D2I8A20N','2022-2023',1,7,'Lebron','Cespedes','Ramon');
CALL SP_INSERTAR_CALIFICACION_1ER_CICLO ('D2I8A20N','2022-2023',1,1,100,100,100,100,90,0,0);
CALL SP_INSERTAR_CALIFICACION_2DO_CICLO_ACAD ('D2I8A20N','2022-2023',1,2,100,100,100,100,90,0,0);
CALL SP_INSERTAR_CALIFICACION_2DO_CICLO_TEC ('D2I8A20N','2022-2023',1,1,100,0,'G',12.5,0,'G',12.5,0,'G',12.5,0,'G',12.5,0,'G',12.5,0,'G',12.5,0,'G',12.5,0,'G','G');
CALL SP_INSERTAR_MAESTROS ('Alcantara','Velasquez','keily',1,1);
